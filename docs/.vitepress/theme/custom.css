/**
 * Custom styles for mobile responsiveness and accessibility
 * Extends VitePress default theme
 */

/* ===================================
 * Mobile-first responsive improvements
 * ================================== */

/* Ensure tables are scrollable on mobile */
.vp-doc table {
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Default link treatment */
.vp-doc a {
  text-decoration: underline;
  text-decoration-thickness: 0.1em;
  text-decoration-skip-ink: auto;
}

.vp-doc a:hover,
.vp-doc a:focus-visible {
  text-decoration-thickness: 0.12em;
}

@media (max-width: 640px) {
  .vp-doc table {
    font-size: 0.875rem;
  }

  .vp-doc th,
  .vp-doc td {
    padding: 0.5rem;
  }
}

/* Code blocks responsive improvements */
.vp-doc div[class*='language-'] {
  margin: 1rem 0;
  border-radius: 8px;
}

@media (max-width: 640px) {
  .vp-doc div[class*='language-'] {
    margin-left: -1.5rem;
    margin-right: -1.5rem;
    border-radius: 0;
  }

  .vp-doc div[class*='language-'] code {
    font-size: 0.8125rem;
  }
}

/* Improve mobile readability */
@media (max-width: 640px) {
  .vp-doc h1 {
    font-size: 1.75rem;
    line-height: 1.25;
  }

  .vp-doc h2 {
    font-size: 1.5rem;
    line-height: 1.3;
  }

  .vp-doc h3 {
    font-size: 1.25rem;
  }

  .vp-doc p,
  .vp-doc li {
    font-size: 0.9375rem;
    line-height: 1.6;
  }
}

/* Touch-friendly link spacing on mobile */
@media (max-width: 640px) {
  .vp-doc a {
    padding: 0.125rem 0;
    display: inline-block;
  }
}

/* ===================================
 * Accessibility improvements
 * ================================== */

/* Focus visible styles for keyboard navigation */
.vp-doc a:focus-visible,
.vp-doc button:focus-visible {
  outline: 2px solid var(--vp-c-brand-1);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Ensure sufficient color contrast for code blocks */
.vp-doc code {
  background-color: var(--vp-c-bg-soft);
  padding: 0.25rem 0.375rem;
  border-radius: 4px;
  font-size: 0.875em;
  color: var(--vp-code-color);
}
.vp-doc [class*='language-'] code {
  background: inherit;
}

/* Skip to content link for screen readers */
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--vp-c-brand-1);
  color: var(--vp-c-white);
  padding: 0.5rem 1rem;
  text-decoration: none;
  z-index: 100;
}

.skip-to-content:focus {
  top: 0;
}

/* Improve contrast for warning/info boxes */
.vp-doc .custom-block {
  border-left: 4px solid;
  padding: 0.75rem 1rem;
  margin: 1rem 0;
}

.vp-doc .custom-block.tip {
  border-color: var(--vp-c-brand-1);
  background-color: var(--vp-c-brand-soft);
}

.vp-doc .custom-block.warning {
  border-color: var(--vp-c-warning-1);
  background-color: var(--vp-c-warning-soft);
}

.vp-doc .custom-block.danger {
  border-color: var(--vp-c-danger-1);
  background-color: var(--vp-c-danger-soft);
}

.nb-draft-callout {
  padding: 0.8rem;
  border: 1px dashed color-mix(in srgb, var(--vp-c-bg-soft) 70%, rgba(0, 0, 0, 0.5));
  border-radius: 0.5rem;
  background: color-mix(in srgb, var(--vp-c-bg-soft) 70%, var(--vp-c-brand-soft));
  margin-bottom: 1rem;
  color: var(--vp-c-text-2);
}

.dark .nb-draft-callout {
  border-color: color-mix(in srgb, var(--vp-c-bg-soft) 80%, #ffffff);
  background: color-mix(in srgb, var(--vp-c-bg-soft) 60%, rgba(255, 255, 255, 0.05));
  color: var(--vp-c-text-1);
}

.vp-badge.tip,
.VPBadge.tip {
  background-color: var(--nb-color-purple-soft) !important;
  color: var(--nb-color-purple-text) !important;
  border: 1px solid var(--nb-color-purple);
}

.vp-badge.info,
.VPBadge.info {
  background-color: var(--nb-color-info-bg) !important;
  color: var(--nb-color-info-text) !important;
  border: 1px solid var(--nb-color-info-border) !important;
}

.vp-badge.warning,
.VPBadge.warning {
  background-color: var(--nb-color-warning-bg) !important;
  color: var(--nb-color-warning-text) !important;
  border: 1px solid var(--nb-color-warning-border) !important;
}

/* ===================================
 * Navigation title overflow prevention
 * ================================== */

/* Prevent long site titles from breaking layout on mobile sidebar */
.VPNavBarTitle .title {
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.VPNavBarTitle .logo img {
  height: 32px;
  max-height: 32px;
  width: auto;
}

@media (max-width: 768px) {
  .VPNavBarTitle .title {
    max-width: 140px;
  }
}

@media (max-width: 480px) {
  .VPNavBarTitle .title {
    max-width: 100px;
  }
}

/* Sidebar link text wrapping for long titles */
.VPSidebarItem .text {
  overflow-wrap: break-word;
  word-break: break-word;
  hyphens: auto;
}

/* Ensure sidebar links don't overflow container */
.VPSidebarItem a {
  max-width: 100%;
  display: block;
}

/* ===================================
 * Content segment visual indicators
 * ================================== */

/* Content segments are visually indicated by emojis in sidebar config:
   ðŸ“– Public Knowledge - General documentation for all users
   ðŸ‘¥ Contributor Resources - Guides for contributors and maintainers
*/

.VPDocFooter .pager .pager-link {
  border-color: rgba(245, 158, 11, 0.38);
  transition:
    border-color 0.2s ease,
    background-color 0.2s ease;
}

.VPDocFooter .pager .pager-link:hover {
  border-color: rgba(245, 158, 11, 0.65);
  background-color: rgba(245, 158, 11, 0.12);
}

/* ===================================
 * Print styles
 * ================================== */

@media print {
  .vp-nav,
  .vp-sidebar,
  .vp-doc-feedback,
  .vp-doc-footer {
    display: none;
  }

  .vp-doc {
    max-width: 100%;
  }

  .vp-doc a {
    text-decoration: underline;
  }

  .vp-doc a[href^='http']:after {
    content: ' (' attr(href) ')';
    font-size: 0.8em;
    color: var(--vp-c-text-2);
  }
}

/* ===================================
 * Reduced motion support
 * ================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ===================================
 * High contrast mode support
 * ================================== */

@media (prefers-contrast: high) {
  .vp-doc a {
    text-decoration: underline;
  }

  .vp-button {
    border-width: 2px;
  }
}

/* ===================================
 * Dark mode specific adjustments
 * ================================== */

.dark .vp-doc code,
.dark .vp-doc pre {
  background-color: var(--vp-c-bg-soft);
  color: var(--vp-code-color);
}

.dark .vp-doc table {
  border-color: var(--vp-c-divider);
}

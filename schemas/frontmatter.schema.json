{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Northbook frontmatter",
  "type": "object",
  "additionalProperties": true,
  "required": [
    "title",
    "band",
    "owner",
    "refresh_after_days",
    "change_type",
    "status",
    "bucket",
    "north_star_id",
    "guardrail_id",
    "leading_metric",
    "lagging_metric",
    "release_tag",
    "decision_id",
    "date"
  ],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 80
    },
    "band": {
      "type": "string",
      "const": "A"
    },
    "owner": {
      "type": "string",
      "pattern": "^@[A-Za-z0-9-]+$"
    },
    "refresh_after_days": {
      "type": "integer",
      "minimum": 1,
      "maximum": 365
    },
    "change_type": {
      "type": "string",
      "enum": ["patch", "minor", "major"]
    },
    "status": {
      "type": "string",
      "enum": ["live", "stale", "pilot", "archived"]
    },
    "last_reviewed": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "audience": {
      "type": "string"
    },
    "tone": {
      "type": "string"
    },
    "narrative_goal": {
      "type": "string"
    },
    "nav": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "string",
            "enum": ["main", "sidebar", "none"]
          },
          {
            "type": "object",
            "properties": {
              "slot": {
                "type": "string",
                "enum": ["main", "sidebar", "none"]
              },
              "label": {
                "type": "string"
              },
              "group": {
                "type": "string"
              },
              "order": {
                "type": "number"
              }
            },
            "required": ["slot"],
            "additionalProperties": false
          }
        ]
      },
      "minItems": 0,
      "uniqueItems": false
    },
    "nav_label": {
      "type": "string"
    },
    "nav_group": {
      "type": "string"
    },
    "nav_order": {
      "type": "number"
    },
    "date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "bucket": {
      "type": "string",
      "enum": ["navigate", "operate", "learn", "mitigate"]
    },
    "north_star_id": {
      "type": "string",
      "const": "ns-001"
    },
    "guardrail_id": {
      "type": "string",
      "enum": ["gr-101", "gr-102", "gr-103", "gr-104", "gr-105"]
    },
    "cta_primary_label": {
      "type": "string",
      "minLength": 1
    },
    "cta_secondary_label": {
      "type": "string",
      "minLength": 1
    },
    "leading_metric": {
      "type": "string",
      "enum": [
        "m-nav-open",
        "m-time-to-answer",
        "m-lab-pass",
        "m-defect-rate-changed-pages",
        "m-dashboard-freshness-days",
        "m-decision-hit-rate",
        "m-time-to-freeze",
        "m-time-to-recovery"
      ]
    },
    "lagging_metric": {
      "type": "string",
      "enum": [
        "m-nav-open",
        "m-time-to-answer",
        "m-lab-pass",
        "m-defect-rate-changed-pages",
        "m-dashboard-freshness-days",
        "m-decision-hit-rate",
        "m-time-to-freeze",
        "m-time-to-recovery"
      ]
    },
    "list_label": {
      "type": "string",
      "minLength": 1,
      "maxLength": 200
    }
  }
}

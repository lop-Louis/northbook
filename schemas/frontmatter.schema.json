{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Northbook frontmatter",
  "type": "object",
  "additionalProperties": true,
  "required": ["title", "band", "owner", "refresh_after_days", "change_type", "status", "nav"],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 80
    },
    "band": {
      "type": "string",
      "const": "A"
    },
    "owner": {
      "type": "string",
      "pattern": "^@[A-Za-z0-9-]+$"
    },
    "refresh_after_days": {
      "type": "integer",
      "minimum": 1,
      "maximum": 365
    },
    "change_type": {
      "type": "string",
      "enum": ["patch", "minor", "major"]
    },
    "status": {
      "type": "string",
      "enum": ["live", "stale", "archived", "draft"]
    },
    "last_reviewed": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "audience": {
      "type": "string"
    },
    "tone": {
      "type": "string"
    },
    "narrative_goal": {
      "type": "string"
    },
    "nav": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "string",
            "enum": ["main", "sidebar", "none"]
          },
          {
            "type": "object",
            "properties": {
              "slot": {
                "type": "string",
                "enum": ["main", "sidebar", "none"]
              },
              "label": {
                "type": "string"
              },
              "group": {
                "type": "string"
              },
              "order": {
                "type": "number"
              }
            },
            "required": ["slot"],
            "additionalProperties": false
          }
        ]
      },
      "minItems": 1,
      "uniqueItems": false
    },
    "nav_label": {
      "type": "string"
    },
    "nav_group": {
      "type": "string"
    },
    "nav_order": {
      "type": "number"
    }
  }
}
